# HC32L003低功耗

## 一、功能说明

##### 	1、睡眠：

​				通过Lpm_GotoDeepSleep(FALSE);使芯片进去深度睡眠模式

##### 	2、唤醒：

​				通过lpt（低功耗定时器自动唤醒）

##### 	3、io设置：

​				睡眠模式下，不工作的io口全部设置成输入模式（高阻态，没有电流）

##### 	4、adc设置：

​			睡眠模式下一定要关闭adc，adc的功耗是非常高的（adc关闭代码如下）

```c
M0P_ADC->CR0|=0xFFFFF7FF;
M0P_BGR->CR_f.BGR_EN = FALSE;
POWEROFF;	//adc控制管脚
Adc_Disable();
```
##### 	5、程序流程：

​			程序通过lpt定时唤醒（1s唤醒一次），整体程序的运行周期为1s。

##### 6、输出类型的io口

​		输出类型的io口一定要注意上下拉(与硬件一定要一一对应)

##### 7、总结

* 首先在只焊有一个芯片的pcb板子上，测出当前芯片的功耗，是否达到你想要的功耗。
* 需要根据电路的上下拉电阻对芯片的io口进行配置，不然一个io口会消耗100ua的电流
* 在进入低功耗之前需要把所有的外设都关闭了，需要根据芯片的特定关闭方式关闭
* 切换为低时钟，时钟频率高会增加功耗